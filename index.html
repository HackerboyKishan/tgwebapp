<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Telegram WebApp Extractor</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial; background: #111; color: #0f0; padding: 20px; }
    button { margin: 10px; padding: 10px; background:#222; color:#0f0; border:1px solid #0f0; border-radius:5px; }
    pre { background:#000; padding:10px; border-radius:5px; }
  </style>
</head>
<body>
  <h2>ðŸš€ Telegram WebApp Data Extractor</h2>

  <button onclick="getQueryId()">ðŸ”‘ Get Query ID</button>
  <button onclick="getUser()">ðŸ‘¤ Get User Data</button>
  <button onclick="getToken()">ðŸ›¡ Get Token</button>
  <button onclick="copyAll()">ðŸ“‹ Copy All</button>

  <h3>ðŸ“Œ Extracted Data:</h3>
  <pre id="output"></pre>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let extracted = {};

    // âœ… Query ID Extract
    function getQueryId() {
      try {
        extracted.query_id = tg.initDataUnsafe.query_id || "âŒ Not Found";
        showOutput("Query ID: " + extracted.query_id);
      } catch (e) {
        showOutput("Error getting Query ID: " + e.message);
      }
    }

    // âœ… User Data Extract
    function getUser() {
      try {
        extracted.user = tg.initDataUnsafe.user || {};
        showOutput("User Data: " + JSON.stringify(extracted.user, null, 2));
      } catch (e) {
        showOutput("Error getting User Data: " + e.message);
      }
    }

    // âœ… Token Extract
    function getToken() {
      try {
        extracted.token = tg.initData || "âŒ Not Found";
        showOutput("Token: " + extracted.token);
      } catch (e) {
        showOutput("Error getting Token: " + e.message);
      }
    }

    // âœ… Copy All
    function copyAll() {
      const text = JSON.stringify(extracted, null, 2);
      navigator.clipboard.writeText(text).then(() => {
        alert("âœ… Data copied to clipboard!");
      }).catch(err => {
        console.error("Copy failed", err);
      });
    }

    // Show output in <pre>
    function showOutput(text) {
      document.getElementById("output").textContent += text + "\n\n";
    }
  </script>
</body>
</html>
